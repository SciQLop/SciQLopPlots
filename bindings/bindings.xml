<?xml version="1.0"?>
<typesystem package="SciQLopPlotsBindings">
    <system-include file-name="memory"/>
    <rejection class="std" function-name="^[a-z_]+$"/>
    <system-include file-name="memory"/>
    <system-include file-name="shared_ptr.h"/>
    <load-typesystem name="typesystem_core.xml" generate="no" />
    <load-typesystem name="typesystem_gui.xml" generate="no" />
    <load-typesystem name="typesystem_widgets.xml" generate="no" />
    <primitive-type name="std::string"/>
    <primitive-type name="std::size_t"/>
    <primitive-type name="long"/>
    <container-type name="std::vector" type="vector">
        <include file-name="vector" location="global"/>
        <include file-name="numpy_wrappers.hpp" location="local"/>
        <conversion-rule>
            <native-to-target>
                %INTYPE::size_type vectorSize = %in.size();
                PyObject* %out = PyList_New((int) vectorSize);
                for (%INTYPE::size_type idx = 0; idx &lt; vectorSize; ++idx) {
                    %INTYPE_0 cppItem(%in[idx]);
                    PyList_SET_ITEM(%out, idx, %CONVERTTOPYTHON[%INTYPE_0](cppItem));
                }
                return %out;
            </native-to-target>
            <target-to-native>
                <add-conversion type="PySequence">
                    Shiboken::AutoDecRef seq(PySequence_Fast(%in, 0));
                    int vectorSize = PySequence_Fast_GET_SIZE(seq.object());
                    %out.reserve(vectorSize);
                    for (int idx = 0; idx &lt; vectorSize; ++idx ) {
                        PyObject* pyItem = PySequence_Fast_GET_ITEM(seq.object(), idx);
                        %OUTTYPE_0 cppItem = %CONVERTTOCPP[%OUTTYPE_0](pyItem);
                        %out.push_back(cppItem);
                    }
                </add-conversion>
                <add-conversion type="PyObject" check="NpArray_view::isNpArray(%in)">
                    %out = NpArray_view(%in).to_std_vect();
                </add-conversion>
            </target-to-native>
        </conversion-rule>
    </container-type>
    <primitive-type name="NpArray" target-lang-api-name="PyObject">
      <include file-name="numpy_wrappers.hpp" location="local"/>
      <conversion-rule>
          <native-to-target>
          auto result = %in.py_object();
          return result;
          </native-to-target>
          <target-to-native>
            <add-conversion type="PyObject" check="NpArray::isNpArray(%in)">
            %out = %OUTTYPE(%in);
            </add-conversion>
          </target-to-native>
        </conversion-rule>
    </primitive-type>
    <object-type name="QCustomPlot" parent-management="yes">
    </object-type>
    <object-type name="QCPItemStraightLine" parent-management="yes">
        <extra-includes>
            <include file-name="pysidesignal.h" location="global"/>
        </extra-includes>
    </object-type>
    <namespace-type name="SciQLopPlots" visible="false">
        <namespace-type name="enums" visible="true">
            <enum-type name="Axis"/>
            <enum-type name="DataOrder"/>
            <enum-type name="Layers"/>
            <enum-type name="IteractionsMode"/>
            <enum-type name="GraphType"/>
        </namespace-type>
        <namespace-type name="axis" visible="true">
            <value-type name="range" copyable="yes" />
        </namespace-type>
        <namespace-type name="interfaces" visible="true">
            <object-type name="IPlotWidget" />
            <object-type name="IGraph" />
            <object-type name="ILineGraph" />
            <object-type name="IMultiLineGraph" />
            <object-type name="IColorMapGraph" />
        </namespace-type>
        <object-type name="SyncPanel" />
        <object-type name="PlotWidget" />
        <object-type name="ColorMapGraph">
            <extra-includes>
              <include file-name="numpy_wrappers.hpp" location="global"/>
              <include file-name="SciQLopPlots/enums.hpp" location="global"/>
            </extra-includes>
            <add-function signature="plot(PyObject *@x@, PyObject *@y@, PyObject *@z@)">
                <inject-code file="snippets.cpp" snippet="plot-colormap"/>
            </add-function>
        </object-type>
        <object-type name="MultiLineGraph">
            <extra-includes>
              <include file-name="numpy_wrappers.hpp" location="global"/>
              <include file-name="SciQLopPlots/enums.hpp" location="global"/>
            </extra-includes>
            <add-function signature="plot(PyObject *@x@, PyObject *@y@, SciQLopPlots::enums::DataOrder *@order@)">
                <inject-code file="snippets.cpp" snippet="plot-multiline"/>
            </add-function>
        </object-type>
        <object-type name="LineGraph">
            <extra-includes>
              <include file-name="numpy_wrappers.hpp" location="global"/>
              <include file-name="SciQLopPlots/enums.hpp" location="global"/>
            </extra-includes>
            <add-function signature="plot(PyObject *@x@, PyObject *@y@)">
                <inject-code file="snippets.cpp" snippet="plot-line"/>
            </add-function>
        </object-type>
        <object-type name="TimeSpan" />
    </namespace-type>
</typesystem>



